<div class="container-fluid">
  <div class="row">
    <div class="col-xl-12">
      <mat-card *ngIf="patientDetails" style="margin-bottom: 20px">
        <div class="row">
          <div class="col-xl-4">
            <h5>First Name: <b>{{patientDetails.firstName}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>User Name: <b>{{patientDetails.userName}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>User ID: <b>{{patientDetails.userId}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Last Name: <b>{{patientDetails.lastName}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Email: <b>{{patientDetails.email}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Phone: <b>{{patientDetails.phone}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Whatsapp: <b>{{patientDetails.whatsapp}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Date Of Birth: <b>{{patientDetails.dob | date}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Age: <b>{{patientDetails.age}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Bloodgroup: <b>{{patientDetails.bloodgroup}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Height: <b>{{patientDetails.height}} cms</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Weight: <b>{{patientDetails.weight}} kgs</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>{{patientDetails.relationType}}: <b>{{patientDetails.relationName}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Last Visited Date: <b>{{patientDetails.lastVisitedDate | date}}</b></h5>
          </div>
          <div class="col-xl-4">
            <h5>Last Visited Doctor: <b>{{patientDetails.lastVisitedDoctor}}</b></h5>
          </div>
          <div class="col-xl-12">
            <h5>Address: <b>{{patientDetails.address}}</b></h5>
          </div>
        </div>
      </mat-card>
    </div>

    <div>
      <div *ngIf="patientDetails" style="margin-bottom:20px" class="col-xl-12">
        <mat-card>
          <mat-card-header>
            <mat-card-title>Visit History</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div>
              <mat-accordion>
                <mat-expansion-panel style="margin-bottom: 5px;"
                  *ngFor="let visit of patientDetails?.visitHistory | sortList : '-patientFor';let i = index">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{visit.date}}
                    </mat-panel-title>
                    <mat-panel-description>
                      {{visit.Doctor}}
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <div id="printDiv{{i}}">
                    <div>
                      <h3>Consultation Questions</h3>
                      <div *ngFor="let question of visit.questions;let i=index">
                        <h5 style="margin: 5px">{{i+1}}, {{question.name}}</h5>
                        <div *ngIf="question.childrens.length > 0">
                          <app-questionloop [children]="question.childrens"></app-questionloop>
                        </div>
                      </div>
                    </div>

                    <div style="margin:20px 0px">
                      <h3>Review of Systems</h3>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="Weight" matInput placeholder="Headache"
                            [(ngModel)]="visit.ros.headache">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="Weight" matInput placeholder="Dizziness"
                            [(ngModel)]="visit.ros.dizziness">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="Weight" matInput placeholder="Appetite"
                            [(ngModel)]="visit.ros.appetite">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="Weight" matInput placeholder="Chest Pain"
                            [(ngModel)]="visit.ros.chestPain">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="Weight" matInput placeholder="Abdominal Pain"
                            [(ngModel)]="visit.ros.abdominalPain">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="Weight" matInput placeholder="Menstrual Cycles"
                            [(ngModel)]="visit.ros.menstrualCycles">
                        </mat-form-field>
                      </div>

                    </div>

                    <div style="margin:20px 0px">
                      <h3>ON Examinations</h3>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="bp" matInput placeholder="BP" [(ngModel)]="visit.oe.bp">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="pules" matInput placeholder="Pules" [(ngModel)]="visit.oe.pules">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="heent" matInput placeholder="Heent" [(ngModel)]="visit.oe.heent">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="neck" matInput placeholder="Neck" [(ngModel)]="visit.oe.neck">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="respsystem" matInput placeholder="RESP System"
                            [(ngModel)]="visit.oe.respsystem">
                        </mat-form-field>
                      </div>

                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="heart" matInput placeholder="Heart" [(ngModel)]="visit.oe.heart">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="abdomen" matInput placeholder="Abdomen" [(ngModel)]="visit.oe.abdomen">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="extremities" matInput placeholder="Extremities"
                            [(ngModel)]="visit.oe.extremities">
                        </mat-form-field>
                      </div>


                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="gentalia" matInput placeholder="gentalia"
                            [(ngModel)]="visit.oe.gentalia">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="breast" matInput placeholder="Breast" [(ngModel)]="visit.oe.breast">
                        </mat-form-field>
                      </div>
                      <div style="width:100%">
                        <mat-form-field>
                          <input disabled name="feet" matInput placeholder="Feet" [(ngModel)]="visit.oe.feet">
                        </mat-form-field>
                      </div>



                    </div>


                    <div style="margin:20px 0px">
                      <h3>Lab Reports</h3>
                      <mat-form-field [style.fontSize]="'20px'" style="width:100%">
                        <textarea disabled [(ngModel)]="visit.labReports" matInput cdkTextareaAutosize
                          #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="2" cdkAutosizeMaxRows="20"
                          placeholder="Lab Reports"></textarea>
                      </mat-form-field>
                    </div>

                    <div style="margin:20px 0px">
                      <h3>Impressions</h3>
                      <mat-form-field [style.fontSize]="'20px'" style="width:100%">
                        <textarea disabled [(ngModel)]="visit.impressions" matInput cdkTextareaAutosize
                          #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="2" cdkAutosizeMaxRows="20"
                          placeholder="Impressions"></textarea>
                      </mat-form-field>
                    </div>

                    <div style="margin:20px 0px">
                      <h3>Recommendations</h3>
                      <mat-form-field [style.fontSize]="'20px'" style="width:100%">
                        <textarea disabled [(ngModel)]="visit.recommendations" matInput cdkTextareaAutosize
                          #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="2" cdkAutosizeMaxRows="20"
                          placeholder="Recommendations"></textarea>
                      </mat-form-field>
                    </div>



                    <div style="margin:25px 0px">
                      <h3>Consultation Summary</h3>
                      <div>
                        <mat-form-field disabled="true" [style.fontSize]="'20px'" style="width:100%">
                          <textarea disabled="true" [(ngModel)]="visit.consultationSummary" matInput cdkTextareaAutosize
                            #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="2" cdkAutosizeMaxRows="20"></textarea>
                        </mat-form-field>
                      </div>
                    </div>
                    <div style="margin:25px 0px">
                      <h3>Prescription</h3>
                      <div>
                        <table class="table table-striped table-responsive">
                          <thead>
                            <tr>
                              <th>S.No</th>
                              <th>Name</th>
                              <th>Type</th>
                              <th>Days</th>
                              <th style="text-align: center">Breakfast</th>
                              <th style="text-align: center">Lunch</th>
                              <th style="text-align: center">Evening</th>
                              <th style="text-align: center">Dinner</th>
                              <th>Total Tablets</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let pres of visit.prescription;let i = index">
                              <td scope="row">
                                {{i+1}}.
                              </td>
                              <td>
                                {{pres.name}}
                              </td>
                              <td>
                                <div *ngFor="let type of pres.type;let j = index">
                                  <div *ngIf="type.selected">
                                    {{type.name}}
                                  </div>
                                </div>
                              </td>
                              <td>
                                {{pres.days}} day(s)
                              </td>
                              <td>
                                <div style="text-align: center">
                                  <mat-checkbox disabled="true" [(ngModel)]="pres.breakfast.value">
                                    {{pres.breakfast.time}}</mat-checkbox>
                                </div>
                              </td>
                              <td>
                                <div style="text-align: center">
                                  <mat-checkbox disabled="true" [(ngModel)]="pres.lunch.value">{{pres.lunch.time}}
                                  </mat-checkbox>

                                </div>
                              </td>
                              <td>
                                <div style="text-align: center">
                                  <mat-checkbox disabled="true" [(ngModel)]="pres.evening.value">{{pres.evening.time}}
                                  </mat-checkbox>

                                </div>
                              </td>
                              <td>
                                <div style="text-align: center">
                                  <mat-checkbox disabled="true" [(ngModel)]="pres.dinner.value">{{pres.dinner.time}}
                                  </mat-checkbox>

                                </div>
                              </td>
                              <td>
                                {{pres.total}}
                              </td>

                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </mat-expansion-panel>
              </mat-accordion>
            </div>

          </mat-card-content>


        </mat-card>

      </div>
      <div *ngIf="patientDetails" style="margin-bottom:20px" class="col-xl-12">
        <mat-card>
          <mat-card-content>
            <div>
              <div style="margin:20px 0px">
                <h4>Past Medical History</h4>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="DM" matInput placeholder="DM" [(ngModel)]="patientDetails.pmh.dm">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="HTN" matInput placeholder="HTN" [(ngModel)]="patientDetails.pmh.htn">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="Heartdisease" matInput placeholder="Heart Disease"
                      [(ngModel)]="patientDetails.pmh.heartDisease">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="Thyroid" matInput placeholder="Thyroid"
                      [(ngModel)]="patientDetails.pmh.thyroid">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="Asthma" matInput placeholder="Asthma" [(ngModel)]="patientDetails.pmh.asthma">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="Surgeries" matInput placeholder="Surgeries"
                      [(ngModel)]="patientDetails.pmh.surgeries">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="Allergies" matInput placeholder="Allergies"
                      [(ngModel)]="patientDetails.pmh.allergies">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="Obstetrichistory" matInput placeholder="Obstetric History"
                      [(ngModel)]="patientDetails.pmh.obstetricHistory">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="grav" matInput placeholder="Grav" [(ngModel)]="patientDetails.pmh.grav">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="Para" matInput placeholder="Para" [(ngModel)]="patientDetails.pmh.para">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="Abortion" matInput placeholder="Abortion"
                      [(ngModel)]="patientDetails.pmh.abortion">
                  </mat-form-field>
                </div>
                <div style="width:100%">
                  <mat-form-field>
                    <input disabled name="live" matInput placeholder="Live" [(ngModel)]="patientDetails.pmh.live">
                  </mat-form-field>
                </div>

              </div>



              <div style="margin:20px 0px">
                <h4>Family History</h4>
                <div>
                  <table class="table">
                    <thead>
                      <tr>
                        <th></th>
                        <th>Father</th>
                        <th>Mother</th>
                        <th>Siblings</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let family of patientDetails.familyHistory">
                        <td>{{family.name}}</td>
                        <td>
                          <mat-checkbox class="example-margin" disabled [(ngModel)]="family.father"></mat-checkbox>
                        </td>
                        <td>
                          <mat-checkbox class="example-margin" disabled [(ngModel)]="family.mother"></mat-checkbox>
                        </td>
                        <td>
                          <mat-checkbox class="example-margin" disabled [(ngModel)]="family.siblings"></mat-checkbox>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

    </div>
  </div>